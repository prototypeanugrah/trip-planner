<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trip Details - Pack Vote</title>
    <link rel="stylesheet" href="/ui/styles.css">
    <link rel="stylesheet" href="/ui/trip-styles.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Pack Vote</h2>
            <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12h18M3 6h18M3 18h18"/>
                </svg>
            </button>
        </div>

        <div class="sidebar-section">
            <button class="btn btn-primary sidebar-new-trip" id="sidebarNewTrip">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 2v12M2 8h12"/>
                </svg>
                New Trip
            </button>
        </div>

        <div class="sidebar-section">
            <h3 class="sidebar-section-title">Your Trips</h3>
            <div class="trips-list" id="sidebarTripsList">
                <!-- Trips will be loaded here -->
                <div class="trips-loading">Loading trips...</div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <!-- Header with Back Button -->
            <header class="trip-header">
                <a href="/ui" class="back-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </a>
                <div class="trip-header-info">
                    <h1 id="tripName">Loading...</h1>
                    <div class="trip-status-badge" id="tripStatus">draft</div>
                </div>
            </header>

            <!-- Trip Overview -->
            <div class="trip-overview card">
                <div class="overview-item">
                    <span class="overview-label">Organizer</span>
                    <span class="overview-value" id="organizerName">-</span>
                </div>
                <div class="overview-item">
                    <span class="overview-label">Travel Dates</span>
                    <span class="overview-value" id="travelDates">-</span>
                </div>
                <div class="overview-item">
                    <span class="overview-label">Duration</span>
                    <span class="overview-value" id="tripDuration">-</span>
                </div>
            </div>

            <!-- Workflow Steps -->
            <div class="workflow-section">
                <h2>Trip Planning Workflow</h2>
                <div class="workflow-steps">
                    <!-- Step 1: Add Participants -->
                    <div class="workflow-step" data-step="participants">
                        <div class="step-header">
                            <div class="step-number">1</div>
                            <div class="step-info">
                                <h3>Add Participants</h3>
                                <p>Invite travelers to join your trip</p>
                            </div>
                        </div>
                        <div class="step-content">
                            <div id="participantsList" class="participants-list">
                                <!-- Participants will be loaded here -->
                            </div>
                            <button class="btn btn-secondary" id="addParticipantBtn">+ Add Participant</button>
                        </div>
                    </div>

                    <!-- Step 2: Get Recommendations -->
                    <div class="workflow-step" data-step="recommendations">
                        <div class="step-header">
                            <div class="step-number">2</div>
                            <div class="step-info">
                                <h3>AI Recommendations</h3>
                                <p>Get personalized destination recommendations</p>
                            </div>
                        </div>
                        <div class="step-content">
                            <div id="recommendationsList" class="recommendations-list">
                                <!-- Recommendations will be loaded here -->
                            </div>
                            <button class="btn btn-primary" id="generateRecommendationsBtn">Generate Recommendations</button>
                        </div>
                    </div>

                    <!-- Step 3: Vote -->
                    <div class="workflow-step" data-step="voting">
                        <div class="step-header">
                            <div class="step-number">3</div>
                            <div class="step-info">
                                <h3>Group Voting</h3>
                                <p>Vote on destinations together</p>
                            </div>
                        </div>
                        <div class="step-content">
                            <div id="votingSection">
                                <!-- Voting UI will be loaded here -->
                            </div>
                            <button class="btn btn-primary" id="startVotingBtn">Start Voting Round</button>
                        </div>
                    </div>

                    <!-- Step 4: Finalize -->
                    <div class="workflow-step" data-step="finalize">
                        <div class="step-header">
                            <div class="step-number">4</div>
                            <div class="step-info">
                                <h3>Finalize Trip</h3>
                                <p>Review results and confirm destination</p>
                            </div>
                        </div>
                        <div class="step-content">
                            <div id="finalResults">
                                <!-- Results will be loaded here -->
                            </div>
                            <button class="btn btn-primary" id="finalizeTripBtn">Finalize Trip</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Participant Modal -->
    <div id="addParticipantModal" class="modal-overlay">
        <div class="modal-container modal-large">
            <div class="modal-header">
                <h1>Add New Participant</h1>
                <p class="modal-subtitle">Fill this quick survey so we can tailor your trip.</p>
            </div>

            <form id="addParticipantForm">
                <!-- Name and Phone Row -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label-inline">Name</label>
                        <input
                            type="text"
                            id="participantName"
                            name="name"
                            placeholder="Alex Doe"
                            required
                            class="form-input"
                            autocomplete="name"
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label-inline">Phone</label>
                        <div class="phone-input-group">
                            <select name="country_code" class="form-input phone-country" id="countryCode">
                                <option value="+1" selected>ðŸ‡ºðŸ‡¸ +1</option>
                                <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
                                <option value="+91">ðŸ‡®ðŸ‡³ +91</option>
                                <option value="+86">ðŸ‡¨ðŸ‡³ +86</option>
                                <option value="+81">ðŸ‡¯ðŸ‡µ +81</option>
                                <option value="+49">ðŸ‡©ðŸ‡ª +49</option>
                                <option value="+33">ðŸ‡«ðŸ‡· +33</option>
                                <option value="+39">ðŸ‡®ðŸ‡¹ +39</option>
                                <option value="+61">ðŸ‡¦ðŸ‡º +61</option>
                                <option value="+55">ðŸ‡§ðŸ‡· +55</option>
                            </select>
                            <input
                                type="tel"
                                id="participantPhone"
                                name="phone"
                                placeholder="5551234567"
                                maxlength="15"
                                required
                                class="form-input phone-number"
                                autocomplete="tel"
                            >
                        </div>
                        <small class="form-hint">Enter 10-digit phone number (digits only).</small>
                        <div id="phoneError" class="phone-error" style="display: none;"></div>
                    </div>
                </div>

                <!-- Current Location -->
                <div class="form-group">
                    <label class="form-label-inline">Current Location</label>
                    <input
                        type="text"
                        id="participantLocation"
                        name="location"
                        placeholder="Austin, TX"
                        class="form-input"
                    >
                </div>

                <!-- Budget Section -->
                <div class="preference-section">
                    <label class="section-label">What is Your Budget?</label>
                    <div class="budget-options">
                        <label class="budget-card">
                            <input type="radio" name="budget" value="low" required>
                            <div class="budget-content">
                                <div class="budget-title">Low</div>
                                <div class="budget-range">0 â€“ 1000 USD</div>
                            </div>
                        </label>
                        <label class="budget-card">
                            <input type="radio" name="budget" value="medium">
                            <div class="budget-content">
                                <div class="budget-title">Medium</div>
                                <div class="budget-range">1000 â€“ 2500 USD</div>
                            </div>
                        </label>
                        <label class="budget-card">
                            <input type="radio" name="budget" value="high">
                            <div class="budget-content">
                                <div class="budget-title">High</div>
                                <div class="budget-range">2500+ USD</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Preferences Section -->
                <div class="preference-section">
                    <label class="section-label">Preferences</label>
                    <div class="preferences-grid">
                        <label class="preference-chip">
                            <input type="checkbox" name="preferences" value="beaches">
                            <span>Beaches</span>
                        </label>
                        <label class="preference-chip">
                            <input type="checkbox" name="preferences" value="city_sightseeing">
                            <span>City sightseeing</span>
                        </label>
                        <label class="preference-chip">
                            <input type="checkbox" name="preferences" value="outdoor_adventures">
                            <span>Outdoor adventures</span>
                        </label>
                        <label class="preference-chip">
                            <input type="checkbox" name="preferences" value="festivals_events">
                            <span>Festivals/events</span>
                        </label>
                        <label class="preference-chip">
                            <input type="checkbox" name="preferences" value="food_exploration">
                            <span>Food exploration</span>
                        </label>
                        <label class="preference-chip">
                            <input type="checkbox" name="preferences" value="nightlife">
                            <span>Nightlife</span>
                        </label>
                        <label class="preference-chip">
                            <input type="checkbox" name="preferences" value="shopping">
                            <span>Shopping</span>
                        </label>
                        <label class="preference-chip">
                            <input type="checkbox" name="preferences" value="spa_wellness">
                            <span>Spa wellness</span>
                        </label>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Add Participant</button>
                    <button type="button" class="btn btn-secondary" id="cancelParticipantBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/ui/trip.js"></script>
</body>
</html>
